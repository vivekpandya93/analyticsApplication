{
  "name": "swigql",
  "version": "0.0.4",
  "description": "swig templating for SQL",
  "contributors": [
    {
      "name": "Dan Harbin",
      "url": "https://github.com/RasterBurn"
    }
  ],
  "keywords": [
    "postgres",
    "pg",
    "swig",
    "template",
    "sql"
  ],
  "author": {
    "name": "Dan Harbin",
    "email": "dan.harbin@civitaslearning.com"
  },
  "main": "./lib",
  "repository": {
    "type": "git",
    "url": "https://github.com/civitaslearning/swigql.git"
  },
  "dependencies": {
    "underscore": "~1.4.4"
  },
  "devDependencies": {
    "nodeunit": "*"
  },
  "license": "MIT",
  "readme": "# swigql\n\n[swig](https://github.com/paularmstrong/swig) templating for SQL\n\n## Installation\n\n\tnpm install swigql\n\n## Examples\n\n### Template code\n\n```\nSELECT\n  id\n  , first_name\n  , last_name\nFROM person\nWHERE\n  first_name = {% bind fn %}\n  AND last_name IN {% in last_names %}\n```\n\n### node.js code\n\n```javascript\nvar swigql = require('swigql');\n\nvar tmpl = swigql.compileFile('/path/to/template.sql');\nvar results = tmpl.render({\n\tfn: 'James',\n\tlast_names: ['Franklin', 'Cooper', 'Smitty', 'Black']\n});\n\nconsole.log(results);\n```\n\n### Output\n\n```\n[ 'SELECT\\n  id\\n  , first_name\\n  , last_name\\nFROM person\\nWHERE\\n  first_name = $1\\n  AND last_name IN ($2, $3, $4, $5)',\n  [ 'James', 'Franklin', 'Cooper', 'Smitty', 'Black' ] ]\n```\n\n## Notes\n\nswigql is simply a wrapper around swig with two differences:\n\n1. swigql adds a custom tag to swig named `bind`. This tag will substitute the\n   variable with the appropriate positional parameter (ex. $1).\n\n2. Instead of returning just the output of the template, it also returns the\n   bind parameters in an array suitable for passing to a database driver such\n   as [node-postgres](https://github.com/brianc/node-postgres/wiki/pg).\n\n3. swigql also adds a tag named `in` which iterates over an array and creates\n   a string suitable for use with an IN statement.\n\nBringing some powerful features of swig templating, such as [template\ninheritance](http://paularmstrong.github.com/swig/docs/#inheritance) opens the\ndoor for some interesting possibilities for writing reusable sql queries.  For\nexample, you could have a base query that you can extend to add more fields to\nthe SELECT, or more conditions to the WHERE clause.\n\n### Example base query template\n\n```\nSELECT\n\t{% block select %}\n\tid\n\t{% endblock %}\nFROM tbl\n\t{% block joins %}\n\t{% endblock %}\nWHERE 1=1\n\t{% block where %}\n\t{% endblock %}\n```\n\n### Example sub query template\n\n```\n{% extends 'base.sql' %}\n\n{% block select %}\n\t{% parent %}\n\t, my_fk\n{% endblock %}\n\n{% block joins %}\n{% parent %}\nINNER JOIN other_tbl USING (my_fk)\n{% endblock %}\n\n{% block where %}\n\tAND my_fk = {% bind myVal %}\n{% endblock %}\n```\n\n## See also\n\n[swig](https://github.com/paularmstrong/swig)\n\n## License\n\nCopyright (c) 2013 Civitas Learning Inc\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\nof the Software, and to permit persons to whom the Software is furnished to do\nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n",
  "_id": "swigql@0.0.4",
  "dist": {
    "shasum": "71d6178fea70d2fe7e4c0c3498d49af619520ada",
    "tarball": "http://registry.npmjs.org/swigql/-/swigql-0.0.4.tgz"
  },
  "maintainers": [
    {
      "name": "danharbin",
      "email": "dan.harbin@civitaslearning.com"
    }
  ],
  "directories": {},
  "_shasum": "71d6178fea70d2fe7e4c0c3498d49af619520ada",
  "_resolved": "https://registry.npmjs.org/swigql/-/swigql-0.0.4.tgz",
  "_from": "swigql@*"
}
